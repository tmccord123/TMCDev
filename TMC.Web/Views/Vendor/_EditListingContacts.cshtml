@using TMC.Web.Shared.ViewModels
@using TMC.Web.Shared
@model ListingViewModel
@using (Ajax.BeginPostForm(
                                Url.SmartAction(Model.ActionName, Model.ControllerName, null), Model,
                                Model.FormBeginRequestCallBack,
                                Model.FormSuccessCallBack,
                                Model.FormFailureCallBack,
                                Model.FormValidationCallBack,
                                new
                                {
                                    @class = "form-horizontal",
                                    @id = Model.FormId
                                }))
{
    @Html.ValidationSummary()
    @Html.HiddenFor(model => Model.ListingId, new { id = "hdnListingId" })
    <div id="asdfsdf">
        @using (Ajax.BeginPostForm(
                                Url.SmartAction(Model.ListingContacts.ActionName, Model.ControllerName), null,
                                Model.FormBeginRequestCallBack,
                                Model.FormSuccessCallBack,
                                Model.FormFailureCallBack,
                                Model.FormValidationCallBack,
                                new
                                {
                                    @class = "form-horizontal",
                                    @id = Model.FormId
                                }))
        {
            @Html.ValidationSummary()
            foreach (ContactViewModel listingContactViewModel in @Model.ListingContacts.Contacts)
            {
                <div class="form-group">
                    @Html.LabelFor(x => listingContactViewModel.ContactTypeId, new { @class = "col-md-2 control-label" })
                    <div class="col-md-3">
                        @Html.TextBoxFor(x => listingContactViewModel.ContactTypeId, new { @class = "form-control" })
                    </div>

                    @Html.LabelFor(x => listingContactViewModel.ContactNo, new { @class = "col-md-2 control-label" })
                    <div class="col-md-3">
                        @Html.TextBoxFor(x => listingContactViewModel.ContactNo, new { @class = "form-control" })
                    </div>
                </div>
            }

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" class="btn btn-default" value="Save" />
                </div>
            </div>
        }
    </div>

}
